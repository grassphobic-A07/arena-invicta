{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Arena Invicta{% endblock %}</title>
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            dark: "#1A103C",
                            surface: "#2A1B54",
                            primary: "#9333EA",
                            secondary: "#EC4899",
                            evergreen: "#062726",   
                            danger: "#FF4D4D",
                        },
                        fontFamily: {
                            sans: ['Poppins', 'sans-serif'],
                        },
                        borderRadius: { xl: "16px" }
                    }
                }            
            }
        </script>

        <style>
            body {
                font-family: 'Poppins', sans-serif;
                background-color: #1A103C;
                background-image: linear-gradient(135deg, #1A103C 0%, #2A1B54 50%, #062726 100%);
                background-attachment: fixed;
                color: #FFFFFF;
            }
            /* Scrollbar */
            ::-webkit-scrollbar { width: 10px; height: 10px; }
            ::-webkit-scrollbar-track { background: #1A103C; }
            ::-webkit-scrollbar-thumb { background-color: #9333EA; border-radius: 5px; border: 2px solid #1A103C; }
            ::-webkit-scrollbar-thumb:hover { background-color: #EC4899; }
            
            /* Inputs */
            input, textarea, select {
                background-color: rgba(0, 0, 0, 0.3) !important;
                color: white !important;
                border-color: rgba(255, 255, 255, 0.1) !important;
            }
            input:focus, textarea:focus, select:focus {
                border-color: #EC4899 !important;
                outline: none !important;
                box-shadow: 0 0 0 2px rgba(236, 72, 153, 0.2) !important;
            }
            select {
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
                background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding-right: 2.5rem; -webkit-appearance: none; appearance: none;
            }
        </style>
    </head>

    <body class="flex flex-col min-h-screen text-white selection:bg-secondary selection:text-white">
        
        {% include "nav.html" %}      

        {% block hero %}{% endblock %}  

        <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 {% block main_padding %}py-12 md:py-20{% endblock %}">
            {% if messages %}
                <div id="dj-messages" hidden>
                    {% for message in messages %}
                    <div data-level="{{ message.tags|default:"info" }}" data-text="{{ message|escape }}"></div>
                    {% endfor %}
                </div>
            {% endif %}
            
            {% block content %}
            {% endblock %}
        </main>

        <footer class="border-t border-white/10 bg-[#1A103C]/90 backdrop-blur-sm mt-auto">
            <div class="max-w-7xl mx-auto px-6 py-8 md:py-12">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                    
                    <div class="text-center md:text-left">
                        <span class="block text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary mb-2">ARENA INVICTA</span>
                        <p class="text-xs text-gray-400">Â© 2024 Grassphobic A07. All rights reserved.</p>
                    </div>

                    <div class="flex gap-6 text-sm font-medium text-gray-500 cursor-default select-none">
                        <span>Berita</span>
                        <span>Analisis</span>
                        <span>Kuis</span>
                    </div>

                </div>
            </div>
        </footer>
        
        <div id="toast-viewport" class="fixed top-24 right-4 space-y-2 z-[100000]"></div>
        <div id="ai-confirm" class="fixed inset-0 z-[10050] hidden" role="dialog" aria-modal="true">
            <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" data-ai-close></div>
            <div class="absolute inset-0 flex items-center justify-center p-4">
                <div data-ai-card class="w-full max-w-md rounded-2xl border border-white/10 bg-[#2A1B54] shadow-2xl overflow-hidden transform transition-all duration-150 opacity-0 scale-95 ring-1 ring-white/10">
                    <div class="px-5 py-4 flex items-start gap-3">
                        <div id="ai-confirm-badge" class="h-12 w-12 rounded-full grid place-items-center bg-danger/20 text-danger flex-shrink-0">
                            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 9v4m0 4h.01"/><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/></svg>
                        </div>
                        <div class="min-w-0 flex-grow pt-1">
                            <h3 id="ai-confirm-title" class="text-lg font-bold text-white">Konfirmasi</h3>
                            <p id="ai-confirm-desc" class="mt-1 text-sm text-gray-300 font-light">Yakin?</p>
                        </div>
                    </div>
                    <div class="px-5 py-3 bg-black/20 flex justify-end gap-2">
                        <button data-ai-cancel class="px-4 py-2 rounded-lg border border-white/10 text-gray-300 hover:bg-white/5 hover:text-white transition text-sm font-medium">Cancel</button>
                        <button data-ai-confirm class="px-4 py-2 rounded-lg text-white bg-danger hover:bg-red-600 transition text-sm font-bold shadow-lg shadow-red-500/20">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            (() => {
            let vp = document.getElementById("toast-viewport");
            if (!vp) { vp = document.createElement("div"); vp.id = "toast-viewport"; vp.className = "fixed bottom-6 right-6 z-[9999] w-[360px] max-w-[92vw] flex flex-col gap-3 pointer-events-none"; document.body.appendChild(vp); }
            const variants = {
                success:{wrap:"bg-surface/90 text-white ring-1 ring-secondary/50 shadow-lg shadow-secondary/20",badge:"bg-secondary text-white",icon:`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M20 6L9 17l-5-5"/></svg>`},
                error:{wrap:"bg-dark/95 text-white ring-1 ring-danger/50 shadow-lg shadow-danger/20",badge:"bg-danger text-white",icon:``},
                info:{wrap:"bg-surface/90 text-white ring-1 ring-primary/50",badge:"bg-primary text-white",icon:`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="9" stroke-width="2"/><path stroke-width="2" d="M12 8v.01M11 12h2v4h-2"/></svg>`},
                warning:{wrap:"bg-yellow-900/90 text-white ring-1 ring-yellow-500/50",badge:"bg-yellow-500 text-black",icon:`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M12 9v4m0 4h.01"/><path stroke-width="2" d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/></svg>`}
            };
            function pushToast({ title="", message="", type="success", duration=3200, action } = {}) {
                const v = variants[type] || variants.info;
                const node = document.createElement("div");
                node.setAttribute("role","status"); node.setAttribute("aria-live","polite");
                node.className = `w-full rounded-xl pointer-events-auto shadow-2xl px-4 py-3 flex items-start gap-3 backdrop-blur-md transition-all transform duration-300 ${v.wrap}`;
                node.innerHTML = `
                <div class="shrink-0"><div class="h-8 w-8 rounded-full ${v.badge} grid place-items-center shadow">${v.icon}</div></div>
                <div class="min-w-0 flex-1">${title?`<div class="font-bold leading-5 tracking-tight">${title}</div>`:""}<div class="text-sm leading-5 opacity-90 mt-1 font-light">${message}</div>
                    <div class="mt-2 h-1 w-full bg-white/10 rounded overflow-hidden"><div class="h-full bg-white/50" style="width:100%;transition:width ${duration}ms linear"></div></div>
                </div>
                <div class="pl-1 flex gap-2">
                    ${action?`<button class="ai-toast-action px-2.5 py-1 rounded-lg text-xs font-medium bg-white/20 hover:bg-white/30 transition">${action.label}</button>`:""}
                    <button class="ai-toast-close rounded-lg p-1.5 hover:bg-white/10 transition" aria-label="Close">
                    <svg class="w-4 h-4 opacity-70" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M18 6L6 18M6 6l12 12"/></svg>
                    </button>
                </div>`;
                vp.prepend(node);
                const bar = node.querySelector("div > div > div > div");
                requestAnimationFrame(() => { bar.style.width = "0%"; });
                const close = () => { node.style.opacity = '0'; node.style.transform = 'translateY(-10px)'; setTimeout(()=>node.remove(),300); };
                let timer = setTimeout(close, duration);
                node.querySelector(".ai-toast-close")?.addEventListener("click", () => { clearTimeout(timer); close(); });
                return { close };
            }
            window.showToast = (message, type="success") => pushToast({ message, type });
            window.pushToast = pushToast;
            function runMessages(){ document.querySelectorAll("#dj-messages > div").forEach(n => showToast(n.dataset.text, n.dataset.level)); }
            (document.readyState === "loading") ? document.addEventListener("DOMContentLoaded", runMessages) : runMessages();
            })();

            window.Confirm = (() => {
            const root = document.getElementById("ai-confirm"); if (!root) return { open: async () => true };
            const card = root.querySelector("[data-ai-card]"); const title = document.getElementById("ai-confirm-title");
            const desc = document.getElementById("ai-confirm-desc"); const okBtn = root.querySelector("[data-ai-confirm]"); const noBtn = root.querySelector("[data-ai-cancel]");
            function open({ titleText, messageText, confirmText="Confirm", tone="danger" } = {}) {
                return new Promise((resolve) => {
                title.textContent = titleText || "Konfirmasi"; desc.textContent  = messageText || "Yakin melanjutkan?"; okBtn.textContent = confirmText;
                root.classList.remove("hidden");
                requestAnimationFrame(() => { card.classList.remove("opacity-0","scale-95"); card.classList.add("opacity-100","scale-100"); });
                const done = (val) => {
                    card.classList.add("opacity-0","scale-95"); card.classList.remove("opacity-100","scale-100");
                    setTimeout(() => root.classList.add("hidden"), 120); cleanup(); resolve(val);
                };
                const onOk = () => done(true); const onCancel = () => done(false);
                okBtn.addEventListener("click", onOk); noBtn.addEventListener("click", onCancel);
                function cleanup() { okBtn.removeEventListener("click", onOk); noBtn.removeEventListener("click", onCancel); }
                okBtn.focus();
                });
            } return { open }; })();
        </script>
        {% block scripts %}{% endblock scripts %}
    </body>
</html>