{% extends "base.html" %}
{% block title %}Profile â€¢ Arena Invicta{% endblock %}
{% block content %}

<div class="max-w-4xl mx-auto px-4 py-8">
  <div class="relative bg-[#2A1B54]/80 backdrop-blur-xl border border-white/10 rounded-3xl p-8 md:p-10 shadow-2xl overflow-hidden">
    
    <div class="absolute top-0 right-0 w-96 h-96 bg-primary/20 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/3 pointer-events-none"></div>
    <div class="absolute bottom-0 left-0 w-64 h-64 bg-secondary/10 rounded-full blur-[80px] translate-y-1/3 -translate-x-1/3 pointer-events-none"></div>

    <div class="flex flex-col md:flex-row items-center md:items-start gap-8 relative z-10">
      
      <div class="flex-shrink-0 relative group">
        <div class="absolute -inset-1 bg-gradient-to-br from-primary to-secondary rounded-full opacity-75 blur group-hover:opacity-100 transition duration-500"></div>
        <div class="relative w-32 h-32 md:w-40 md:h-40 rounded-full border-4 border-[#2A1B54] bg-black/50 flex items-center justify-center overflow-hidden shadow-2xl">
           {% if profile.avatar_url %}
            <img src="{{ profile.avatar_url }}" class="w-full h-full object-cover transition transform group-hover:scale-110 duration-500" alt="Avatar">
           {% else %}
             <span class="text-4xl font-extrabold text-white/20">{{ request.user.username|slice:":2"|upper }}</span>
           {% endif %}
        </div>
      </div>

      <div class="flex-grow w-full text-center md:text-left space-y-4">
         <div class="flex flex-col md:flex-row items-center md:items-start justify-between gap-4">
            <div>
              <h1 class="text-3xl md:text-4xl font-extrabold text-white tracking-tight">{{ profile.display_name|default:request.user.username }}</h1>
              <p class="text-lg text-secondary font-medium mt-1">@{{ request.user.username }}</p>
            </div>
            
            {% if role_label %}
              <span class="px-5 py-2 rounded-full text-sm font-bold border uppercase tracking-wider shadow-lg
                {% if role_label == 'Admin' %} border-secondary/50 text-secondary bg-secondary/10 shadow-secondary/20
                {% elif role_label == 'Content Staff' %} border-primary/50 text-primary bg-primary/10 shadow-primary/20
                {% else %} border-gray-500/50 text-gray-300 bg-gray-500/10 {% endif %}">
                {{ role_label }}
              </span>
            {% endif %}
         </div>

         <div class="flex flex-wrap justify-center md:justify-start gap-3 mt-4">
            {% if profile.favorite_team %}
            <div class="inline-flex items-center gap-2 bg-white/5 px-4 py-2 rounded-xl border border-white/10 hover:bg-white/10 transition">
                <svg class="w-5 h-5 text-primary" fill="currentColor" viewBox="0 0 20 20"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/></svg>
                <span class="text-gray-300 text-sm">Fan of <strong class="text-white">{{ profile.favorite_team }}</strong></span>
            </div>
            {% endif %}
            <div class="inline-flex items-center gap-2 bg-white/5 px-4 py-2 rounded-xl border border-white/10">
                <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 001-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"/></path></svg>
                <span class="text-gray-300 text-sm">Member since <strong class="text-white">{{ request.user.date_joined|date:"M Y" }}</strong></span>
            </div>
         </div>

         <div class="mt-6 p-5 bg-black/30 rounded-2xl border border-white/5 text-sm text-gray-300 italic leading-relaxed relative">
            <svg class="absolute top-3 left-3 w-4 h-4 text-white/10 -translate-x-1 -translate-y-1" fill="currentColor" viewBox="0 0 24 24"><path d="M14.017 21L14.017 18C14.017 16.8954 13.1216 16 12.017 16H9C9.00001 15 9.00001 14 9.00001 13C9.00001 12 11 11 11 9C11 7 9.00001 5 7 5C5.00001 5 3 7 3 9H5C5 8 6 8 6 9C6 10 5.00001 11 5.00001 12C5.00001 13 5.00001 14 5.00001 15C5.00001 17.7614 7.23858 20 10 20H14.017V21ZM21.017 21L21.017 18C21.017 16.8954 20.1216 16 19.017 16H16C16.0001 15 16.0001 14 16.0001 13C16.0001 12 18 11 18 9C18 7 16.0001 5 14 5C12.0001 5 10 7 10 9H12C12 8 13 8 13 9C13 10 12.0001 11 12.0001 12C12.0001 13 12.0001 14 12.0001 15C12.0001 17.7614 14.2386 20 17 20H21.017V21Z"/></svg>
            {{ profile.bio|linebreaksbr|default:"No bio yet. This player is mysterious." }}
         </div>
      </div>
    </div>

    <div class="mt-10 flex justify-center md:justify-end border-t border-white/10 pt-6">
        <a href="{% url 'accounts:profile_edit' %}"
           class="inline-flex items-center gap-2 px-8 py-3 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 text-white font-bold transition hover:scale-105 shadow-lg">
           <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg>
           Edit Profile
        </a>
    </div>
  </div>
</div>
{% endblock %}